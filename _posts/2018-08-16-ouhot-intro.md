---
layout: post
title: "【ouhot】集群介绍"
date: 2018-08-16 13:47:57
category: ouhot
tags: [ouhot]
---

- 服务端框架（Server Framework）是整个或部分系统的可重用设计，提供了较为安全稳定的运行环境，
- 表现为一组抽象构件及构件实例间交互的方法;它是可被应用开发者定制的应用骨架
- 是对特定应用领域中的应用系统的部分设计和实现的整体结构。
<!-- more -->  

#### 作用，为什么要用框架

框架强调的是软件的设计重用性和系统的可扩充性,以缩短大型应用软件系统的开发周期，提高开发质量。
它是一个可复用的设计构件，规定了功能的体系结构，阐明了整个设计、协作构件之间的依赖关系、责任分配和控制流程，

软件系统发展到今天已经很复杂了，特别是服务器端软件，涉及到的知识，内容，问题太多。在某些方面使用别人成熟的框架，就相当于让别人帮你完成一些基础工作，你只需要集中精力完成系统的业务逻辑设计。而且框架一般是成熟，稳健的，他可以处理系统很多细节问题，比如，事物处理，安全性，数据流控制等问题。还有框架一般都经过很多人使用，所以结构很好，所以扩展性也很好，而且它是不断升级的，你可以直接享受别人升级代码带来的好处。

#### 解决问题

框架要解决的最重要的一个问题是技术整合的问题，技术自身的复杂性和技术的风险性将会直接对应用造成冲击。而应用是软件企业的核心，是竞争力的关键所在，因此应该将应用自身的设计和具体的实现技术解耦。这样，软件企业的研发将集中在应用的设计上，而不是具体的技术实现，技术实现是应用的底层支撑，它不应该直接对应用产生影响。

集群拓补图

![集群拓普图](/assets/server_ouhot_1.png)

附一张阿里云的架构图

![附一张阿里云的架构图](/assets/server_aly_1.png)

#### 节点和层级

##### 一、节点说明
一个节点，指的就是一个运行单元，一个物理机上可能会运行多个节点（比如master节点和log节点普遍运行在同一台服务器上）。

但通常，一个物理机运行一个节点，运行规划上可以常用“业务层”指派运行。

##### 二、层说明
常见的分层有，网关层，数据层，和逻辑层；逻辑层可以细化为（排行榜，邮件IM）等特定需求环境。

1. 网关层：

负责用户客户端的连接状态维护，信息编码解码，信息路由，均衡负载调节。

2. 逻辑层

负责具体的逻辑处理，功能和系统业务处理，有些数据集中业务聚合较高并需要大量资源的系统，可以单独指定运行其系统的逻辑层，只运行指定功能。

3. 存储层

负责数据寄存，数据持久化，数据相关管理范畴的业务的集合。

组织大概如下：
![layer](/assets/layer.png)
每个节点，都会有节点状态维护的node进程，service作为全局进程，记录了哪些节点上在运行哪些功能，比如service知道第四个计算节点在运行timer。
